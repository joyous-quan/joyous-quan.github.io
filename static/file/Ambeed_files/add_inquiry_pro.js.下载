/**
 * Created by yc on 2018/1/2.
 */
document.write('<link rel="stylesheet" href="/static/css/inquiry.css"/>');
try{memInfoParams={selInfo:true}}catch (e){}
function _openInquiryProBox(obj){
    var am,cas,proname,organization,name,phone,email,country,proid;
    proid=!isempty($(obj).attr("proid"))?$(obj).attr("proid"):"";
    am=!isempty($(obj).attr("am"))?$(obj).attr("am"):"";
    cas=!isempty($(obj).attr("cas"))?$(obj).attr("cas"):"";
    proname=!isempty($(obj).attr("NameEN"))?$(obj).attr("NameEN"):"";
    organization=!isempty(Apharm.mem_qrganization)?Apharm.mem_qrganization:"";
    name=!isempty(Apharm.mem_name)?Apharm.mem_name:"";
    phone=!isempty(Apharm.mem_phone)?Apharm.mem_phone:"";
    email=!isempty(Apharm.mem_email)?Apharm.mem_email:"";
    country=!isempty(Apharm.mem_country)?Apharm.mem_country:"";
    var bulkHtml='<div class="dv_inquiry_box">'+
        '<div>'+
            '<span><i class="c-red">*</i> Organization</i></span>'+
            '<p class="ipt">'+
                '<input type="text" id="organizationText" value="'+organization+'" name="user">'+
            '</p>'+
            '<div class="ipt-small-con">'+
				'<div class="float-left margin-right12" style="width: 208px;">'+
					'<span><i class="c-red">*</i> Name </span>'+
					'<p class="ipt ipt-small">'+
						'<input type="text" name="name" id="nameText"  value="'+name+'" >'+
					'</p>'+
				'</div>'+
				'<div class="float-left" style="width: 208px;">'+
					'<span><i class="c-red">*</i> Phone </span>'+
					'<p class="ipt ipt-small">'+
						'<input type="text" name="phone" id="phoneNum"   value="'+phone+'" >'+
					'</p>'+
				'</div>'+
			'</div>'+
            '<span><i class="c-red">*</i> Email</span>'+
            '<p class="ipt">'+
                '<input type="text" id="emailText"  value="'+email+'"  name="user">'+
            '</p>'+
            '<span><i class="c-red">*</i> Country</span>'+
            '<p class="ipt">'+
                '<input type="text" id="countryText"  value="'+country+'"  name="email">'+
            '</p>'+
            '<span><i class="c-red">*</i> Quantity Required </span>'+
            '<p class="ipt">'+
                '<input type="text" id="quantityText" name="phone">'+
            '</p>'+
            '<span><i class="c-red">*</i> Cat. No.</span>'+
            '<p class="ipt">'+
                '<input type="text" id="catNum" value="'+am+'"   name="phone">'+
            '</p>'+
            '<span><i class="c-red">*</i> CAS No</span>'+
            '<p class="ipt">'+
                '<input type="text" id="casNum" value="'+cas+'"   name="phone">'+
            '</p>'+
            '<span><i class="c-red">*</i> Product Name</span>'+
            '<p class="ipt">'+
                '<input type="text" id="productName" value="'+proname+'"   name="phone">'+
            '</p>'+
            '<span><i class="c-red">*</i> Additional Information</span>'+
            '<p class="ipt textarea-con-small">'+
				'<textarea name="additional-inf" id="AdditionalText" style="width:416px;padding:5px;resize:none;" ></textarea>'+
			'</p>'+
        '</div>'+
        '<p class="errorBox overflowHidder" style="text-align: center;padding-top: 0px;">&nbsp;&nbsp;</p>'+
        '<p class="inquiry-btn">'+
            '<a href="javascript:;" class="btn btn-block green-black-btn submit-btn" onclick="_addinquiryPro(\''+proid+'\')">Submit</a>'+
        '</p></div>';
        aBox._cntbox(bulkHtml,"<b>Information</b>(we will check your order as soon as possible)",450,710);
}
function _addinquiryPro(proid){
    if(isempty(proid)){return false;}
    $(".errorBox").html('&nbsp;&nbsp;');
    var name,email,quantity,information,phone,cat,product,country,company,cas;
    cas=$("#casNum").val();
    company=$("#organizationText").val();
    name=$("#nameText").val();
    phone=$("#phoneNum").val();
    email=$("#emailText").val();
    quantity=$("#quantityText").val();
    cat=$("#catNum").val();
    product=$("#productName").val();
    country=$("#countryText").val();
    information=$("#AdditionalText").val();
    if(email!=''&&quantity!=''&&information!=''&&phone!=''&&name!=''&&proid!=''&&country!=''&&country!=''&&company!=''&&cat!=''){
         if(company.length>500){
            $("#organizationText")[0].focus();
            $(".errorBox").html("The length of the Organization Name should not exceed 500!");
        }else if(name.length>200){
            $("#nameText")[0].focus();
            $(".errorBox").html("The length of the name should not exceed 200!");
        }else if(email.length>200){
            $("#emailText")[0].focus();
            $(".errorBox").html("The length of the email should not exceed 200!");
        }else if(!_chkEmail(email)){
            $("#emailText")[0].focus();
            $(".errorBox").html("Incorrect email format!");
        }else if(phone.length>50){
            $("#phoneNum")[0].focus();
            $(".errorBox").html("The length of the phone should not exceed 50!");
        }else if(quantity.length>20){
            $("#quantityText")[0].focus();
            $(".errorBox").html("The length of the quantity should not exceed 20!");
        }else if(cat.length>50){
            $("#catNum")[0].focus();
            $(".errorBox").html("The length of the Cat.No should not exceed 50!");
        }else if(product.length>500){
            $("#productName")[0].focus();
            $(".errorBox").html("The length of the product should not exceed 500!");
        }else if(company.length>500){
            $("#organizationText")[0].focus();
            $(".errorBox").html("The length of the Organization Name should not exceed 500!");
        }else{
            var params = {"name":name,"email":email,"quantity":quantity,"information":information,"cat":cat,"cas":cas,
                    "product":product,"phone":phone,"proid":proid,'country':country,'company':company
                   };
            _DoAjaxAsyncTrue("POST",params,"/webapi/v1/user/addinquiry",function(){
                aBox._warn("Added successfully!");
                setTimeout(function(){layer.closeAll()},2000);
            });
        }
    }else{
        if(isempty(name)){$("#nameText")[0].focus()}
        else if(isempty(email)){$("#emailText")[0].focus()}
        else if(isempty(phone)){$("#phoneNum")[0].focus()}
        else if(isempty(quantity)){$("#quantityText")[0].focus()}
        else if(isempty(information)){$("#AdditionalText")[0].focus()}
        $(".errorBox").html("fields with * is required!");
    }
}
