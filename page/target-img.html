<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <script type="text/javascript" src="/static/js/jquery.js?t=202211301545"></script>
    <script type="text/javascript" src="/static/js/Tdrag.js?v=20240327001"></script>
    <style type="text/css">
        *{margin:0;padding:0;}
        .fixed_btn{margin:5px;position:fixed;z-index:10000;}
        .fixed_btn button{cursor:pointer;width:24px;height:24px;}
        #box{position:absolute;cursor:all-scroll;}
        #box a{position:absolute;display:inline-block;font-size:0;z-index:10;box-shadow:0 0 10px #fa9430;}
        #box a.on:hover{box-shadow:0 0 10px #fa9430;}
    </style>
</head>
<body style="overflow:hidden;">
    <p class="fixed_btn"><button onclick="zoomIn()"> + </button> <button onclick="zoomOut()"> - </button></p>
    <div id="box">
        <img id="targetImg" class="drag" src="/static/img/target/PI3K-Akt-mTOR.jpg" alt="">
        <div class="diva">
            <a class="on" target="_blank" href="/pi3k.html" style="height:2.26%;width:9.54%;border-radius:20px;left:40.06%;top:21.06%;">PIK3CA</a>
            <a class="on" target="_blank" href="/pi3k.html" style="height:2.26%;width:9.54%;border-radius:20px;left:40.06%;top:23.93%;">PIK3CB</a>
            <a class="on" target="_blank" href="/pi3k.html" style="height:2.26%;width:9.54%;border-radius:20px;left:40.06%;top:26.67%;">PIK3CG</a>
            <a class="on" target="_blank" href="/pi3k.html" style="height:2.26%;width:9.54%;border-radius:20px;left:51.35%;top:21.06%;">PIK3R1</a>
            <a class="on" target="_blank" href="/pi3k.html" style="height:2.26%;width:9.54%;border-radius:20px;left:51.35%;top:23.93%;">PIK3R2</a>
            <a class="on" target="_blank" href="/pi3k.html" style="height:2.26%;width:9.54%;border-radius:20px;left:51.35%;top:26.67%;">PIK3R3</a>
            <a class="on" target="_blank" href="/pten.html" style="height:2.26%;width:9.54%;border-radius:20px;left:10.65%;top:35.81%;">PTEN</a>
           <a class="on" target="_blank" href="/pdk-1.html" style="height:2.26%;width:9.54%;border-radius:20px;left:57.55%;top:38.08%;">PDK1</a>
            <a class="on" target="_blank" href="/foxo.html" style="height:2.26%;width:9.54%;border-radius:20px;left:18.04%;top:50.81%;">FOXO1</a>
            <a class="on" target="_blank" href="/foxo.html" style="height:2.26%;width:9.54%;border-radius:20px;left:18.04%;top:53.47%;">FOXO3</a>
            <a class="on" target="_blank" href="/foxo.html" style="height:2.26%;width:9.54%;border-radius:20px;left:18.04%;top:56.08%;">FOXO4</a>
             <a class="on" target="_blank" href="/akt.html" style="height:2.26%;width:9.54%;border-radius:20px;left:45.71%;top:44.83%;">AKT</a>
            <a class="on" target="_blank" href="/mtor.html" style="height:2.26%;width:9.54%;border-radius:20px;left:71.14%;top:59.35%;">MTOR</a>
            <a class="on" target="_blank" href="/mtor.html" style="height:2.26%;width:9.54%;border-radius:20px;left:45.87%;top:77.49%;">MTOR</a>
        </div>
    </div>

    <script>
        //box拖拽
        $(function(){
            $("#box").Tdrag();
        });
        //图片宽高/2
        var imgstyle = {}
        if ( $(window).width() < 480) {
            imgstyle = {
                "width":"360px",
                "height":"427px"
            }
        }else{
            imgstyle = {
                "width":"629px",
                "height":"747px"
            }
        }
        $("#targetImg").css(imgstyle)



        //靶点url/位点数据
        var targetData = [
             {"height":2.26,"width":9.54,"radius":17,"left":40.06,"top":21.06,"name":"PIK3CA","url":"/pi3k.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":40.06,"top":23.93,"name":"PIK3CB","url":"/pi3k.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":40.06,"top":26.67,"name":"PIK3CG","url":"/pi3k.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":51.35,"top":21.06,"name":"PIK3R1","url":"/pi3k.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":51.35,"top":23.93,"name":"PIK3R2","url":"/pi3k.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":51.35,"top":26.67,"name":"PIK3R3","url":"/pi3k.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":10.65,"top":35.81,"name":"PTEN","url":"/pten.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":57.55,"top":38.08,"name":"PDK1","url":"/pdk-1.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":18.04,"top":50.81,"name":"FOXO1","url":"/foxo.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":18.04,"top":53.47,"name":"FOXO3","url":"/foxo.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":18.04,"top":56.08,"name":"FOXO4","url":"/foxo.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":45.71,"top":44.83,"name":"AKT","url":"/akt.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":71.14,"top":59.35,"name":"MTOR","url":"/mtor.html"}
            ,{"height":2.26,"width":9.54,"radius":17,"left":45.87,"top":77.49,"name":"MTOR","url":"/mtor.html"}
        ]
        //加载靶点url/位点数据
        //_loadahtml(targetData)
        function _loadahtml(data){
            var ahtml = '';
            $.each(data, function(idx, item) {
                ahtml += '<a class="on" target="_blank" href="'+item.url+'" style="height:'+item.height+'%;width:'+item.width+'%;border-radius:'+item.radius+'px;left:'+item.left+'%;top:'+item.top+'%;">'+item.name+'</a>'
            })
            $("#diva").html(ahtml)
        }
        //滚轮控制大小
        var resizableElement = document.getElementById('box');
        resizableElement.addEventListener('wheel', function (event){
            event.preventDefault();
            if (event.deltaY < 0) { // 滚轮向上
                zoomIn()
            } else { // 滚轮向下
                zoomOut()
            }
        });
        function zoomIn(){
            var scaleFactor = 1.1; // 定义缩放因子
            var currentScale = resizableElement.scale || 1;

            resizableElement.scale = currentScale * scaleFactor;
            if(resizableElement.scale > 1.9){
                resizableElement.scale = 2;
            }
            resizableElement.style.transform = 'scale('+resizableElement.scale+')';
        }
        function zoomOut(){
            var scaleFactor = 1.1; // 定义缩放因子
            var currentScale = resizableElement.scale || 1;

            resizableElement.scale = currentScale / scaleFactor;
            if(resizableElement.scale < 0.5){
                resizableElement.scale = 0.5;
            }
            resizableElement.style.transform = 'scale('+resizableElement.scale+')';
        }

        //移动端拖拽
        function Touch(ele){
            var _this=this;
            this.ele=ele;
            this.transP={
                x:0,
                y:0
            };
            this.events={
                handleEvent:function(event){
                    switch(event.type){
                        case 'touchstart':
                            _this.start(event);
                            break;
                        case 'touchmove':
                            _this.move(event);
                            break;
                        case 'touchend':
                            _this.end(event);
                            break;
                    }
                }
            }
        }
        Touch.prototype = {
            start:function(ev){
                var touches=ev.targetTouches[0],
                _this=this;
                this.disP={
                    x:touches.pageX-this.transP.x,
                    y:touches.pageY-this.transP.y,
                    id:touches.identifier
                };
                //console.log('start');
                _this.ele.addEventListener('touchmove',_this.events,false);
                _this.ele.addEventListener('touchend',_this.events,false);
            },
            move:function(ev){
                var touches=ev.targetTouches[0];
                if(touches.identifier== this.disP.id){
                    //console.log('move');
                    this.transP={
                        x:touches.pageX-this.disP.x,
                        y:touches.pageY-this.disP.y
                    };
                    /*this.ele.style.transform='translate3d('+this.transP.x+'px,'+this.transP.y+'px,0)';
                    this.ele.style.Webkittransform='translate3d('+this.transP.x+'px,'+this.transP.y+'px,0)';*/

                    this.ele.style.left=this.transP.x+'px';
                    this.ele.style.top=this.transP.y+'px';
                }
            },
            end:function(ev){
                ev=ev||window.event;
                var _this=this;
                if(ev.changedTouches[0].identify==this.disP.id){
                    _this.ele.removeEventListener('touchmove',_this.events,false);
                    _this.ele.removeEventListener('touchend',_this.events,false);
                }
            },
            init:function(){
                var _this=this;
                this.ele.addEventListener('touchstart',_this.events,false);
            }
        };
        window.onload=function(){
            var box=document.getElementById('box'),
                touch=new Touch(box);
            touch.init();
        };
    </script>
</body>
</html>