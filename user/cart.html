<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>购物车</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="renderer" content="webkit">
	<meta name="force-rendering" content="webkit">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="robots" content="index,follow">
	<meta content="telephone=no,email=no" name="format-detection">
	<link rel="shortcut icon" href="/static/img/favicon.ico" type="image/x-icon"/>
	<link rel="stylesheet" type="text/css" href="/static/iconfont/iconfont.css">
	<link rel="stylesheet" href="/static/css/common.css?t=202006110001" media="all">
	<link rel="stylesheet" href="/static/css/pay.css?t=202006110001" media="all">
	<script src="/static/js/jquery.min.js?t=202006110001"></script>
	<script src="/static/js/common.js?t=202006110001"></script>
</head>
<body>

<div id="header"></div>

<div class="layout">
	<div class="breadcrumb">
		<a href="/">首页</a><i class="iconfont icon-gengduo"></i><a href="javascript:;" class="current">购物车</a>
	</div>
	<h3 class="common-title cart-title">购物车
		<label class="example">
			<a href="/static/upload/batchaddcart/productcart.xlsx" download="">[下载批量下单模板]</a>
			Excel上传批量加入购物车：<input type="file" id="upload">
		</label>
	</h3>
	<div class="cart-con">
		<table class="tab_mycart tab_product">
			<thead>
				<tr>
					<td colspan="2"><label><input class="input_check" type="checkbox" id="cart_totle"> 全选</label></td>
					<td>商品信息</td>
					<td><span class="sp_phone_none">规格</span></td>
					<td class="td_phone_none">单价</td>
					<td class="td_phone_none">促销价</td>
					<td class="td_phone_none">VIP价</td>
					<td><span class="sp_phone_none paddingL20">数量</span></td>
					<td><span class="sp_phone_none">总价</span></td>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td class="width30"><input class="input_check" type="checkbox" id="cart_0" onclick="_uptCartIsChecked(this)" cartid="220974"></td>
					<td class="width110"><a class="img-box" href="/products/148-24-3.html" target="_blank"><img src="https://file.bidepharm.com/static/upload/proimg/151/148-24-3.png"></a></td>
					<td class="td_hover">
						<a href="/products/148-24-3.html" target="_blank" class="a_name">8-羟基喹啉</a>
						<p><span>148-24-3</span><span>BD18450</span>98+%</p>
						<a href="javascript:;" class="a_fav" onclick="_addFavorint('P000150842')">移入收藏夹</a>
						<a href="javascript:;" class="a_del" cartid="220974">删除</a>
					</td>
					<td><span class="sp_size">100g</span></td>
					<td class="td_phone_none unit-price">￥64.0</td>
					<td class="td_phone_none sales-price">￥64.0</td>
					<td class="td_phone_none vip-price ">￥64.0<input type="hidden" value="64.0" class="unitprice"></td>
					<td class="td-mum">
						<span class="sp_ipt_number" cartid="220974">
							<span class="minus">-</span><input type="text" onpropertychange="_upt_quantity_post(this)" onkeyup="_upt_quantity_post(this)" value="1"><span class="add">+</span>
						</span>
					</td>
					<td><span class="td-totle-price">￥<span class="sp_price">64.0</span></span></td>
				</tr>
				<tr>
					<td><input class="input_check" type="checkbox" id="cart_1" onclick="_uptCartIsChecked(this)" cartid="220973"></td>
					<td><a href="/products/148-24-3.html" target="_blank" class="img-box"><img src="https://file.bidepharm.com/static/upload/proimg/151/148-24-3.png"></a></td>
					<td class="td_hover">
						<a href="/products/148-24-3.html" target="_blank" class="a_name">8-羟基喹啉</a>
						<p><span>148-24-3</span><span>BD18450</span>98+%</p>
						<a href="javascript:;" class="a_fav" onclick="_addFavorint('P000150842')">移入收藏夹</a>
						<a href="javascript:;" class="a_del" cartid="220973">删除</a>
					</td>
					<td><span class="sp_size">25g</span></td>
					<td class="td_phone_none unit-price">￥32.0</td>
					<td class="td_phone_none sapes-price">￥32.0</td>
					<td class="td_phone_none vip-price">￥32.0<input type="hidden" value="32.0" class="unitprice"></td>
					<td class="td-mum">
						<span class="sp_ipt_number" cartid="220973">
							<span class="minus">-</span><input type="text" onpropertychange="_upt_quantity_post(this)" onkeyup="_upt_quantity_post(this)" value="2"><span class="add">+</span>
						</span>
					</td>
					<td><span class="td-totle-price">￥<span class="sp_price">64.00</span></span></td>
				</tr>
				<tr>
					<td><input class="input_check" type="checkbox" id="cart_2" onclick="_uptCartIsChecked(this)" cartid="220966"></td>
					<td><a href="/products/90-45-9.html" target="_blank" class="img-box"><img src="https://file.bidepharm.com/static/upload/proimg/472/90-45-9.png"></a></td>
					<td class="td_hover">
						<a href="/products/90-45-9.html" target="_blank" class="a_name">吖啶-9-胺</a>
						<p><span>90-45-9</span><span>BD14518</span>98+%</p>
						<a href="javascript:;" class="a_fav" onclick="_addFavorint('P000471048')">移入收藏夹</a>
						<a href="javascript:;" class="a_del" cartid="220966">删除</a>
					</td>
					<td><span class="sp_size">1g</span></td>
					<td class="td_phone_none unit-price">￥181.0</td>
					<td class="td_phone_none sales-price ">￥181.0</td>
					<td class="td_phone_none vip-price ">￥181.0<input type="hidden" value="181.0" class="unitprice"></td>
					<td class="td-mum">
						<span class="sp_ipt_number" cartid="220966">
							<span class="minus">-</span><input type="text" onpropertychange="_upt_quantity_post(this)" onkeyup="_upt_quantity_post(this)" value="1"><span class="add">+</span>
						</span>
					</td>
					<td><span class="td-totle-price">￥<span class="sp_price">181.0</span></span></td>
				</tr>
				<tr>
					<td><input class="input_check" type="checkbox" id="cart_3" onclick="_uptCartIsChecked(this)" cartid="220962"></td>
					<td><a href="/products/61-70-1.html" target="_blank" class="img-box"><img src="https://file.bidepharm.com/static/upload/proimg/589/61-70-1.png"></a></td>
					<td class="td_hover">
						<a href="/products/61-70-1.html" target="_blank" class="a_name">N-甲基吲哚酮</a>
						<p><span>61-70-1</span><span>BD59390</span>98%</p>
						<a href="javascript:;" class="a_fav" onclick="_addFavorint('P000588775')">移入收藏夹</a>
					<a href="javascript:;" class="a_del" cartid="220962">删除</a>
					</td>
					<td><span class="sp_size">250mg</span></td>
					<td class="td_phone_none unit-price">￥121.0</td>
					<td class="td_phone_none sales-price ">￥121.0</td>
					<td class="td_phone_none vip-price ">￥121.0<input type="hidden" value="121.0" class="unitprice"></td>
					<td class="td-mum">
						<span class="sp_ipt_number" cartid="220962">
							<span class="minus">-</span><input type="text" onpropertychange="_upt_quantity_post(this)" onkeyup="_upt_quantity_post(this)" value="1"><span class="add">+</span>
						</span>
					</td>
					<td><span class="td-totle-price">￥<span class="sp_price">121.0</span></span></td>
				</tr>
				<tr>
					<td><input class="input_check" type="checkbox" id="cart_4" onclick="_uptCartIsChecked(this)" cartid="220950"></td>
					<td><a href="/products/874948-63-7.html" target="_blank" class="img-box"><img src="https://file.bidepharm.com/static/upload/proimg/226/874948-63-7.png"></a></td>
					<td class="td_hover">
						<a href="/products/874948-63-7.html" target="_blank" class="a_name">(S)-3,3′-双(2,4,6-三异丙基苯基)-1,1′-二-2-萘酚环一磷酸酯</a>
						<p><span>874948-63-7</span><span>BD01269399</span>98+%</p>
						<a href="javascript:;" class="a_fav" onclick="_addFavorint('P000225983')">移入收藏夹</a>
						<a href="javascript:;" class="a_del" cartid="220950">删除</a>
					</td>
					<td><span class="sp_size">100mg</span></td>
					<td class="td_phone_none unit-price">￥356.0</td>
					<td class="td_phone_none sales-price ">￥356.0</td>
					<td class="td_phone_none vip-price">￥356.0<input type="hidden" value="356.0" class="unitprice"></td>
					<td class="td-mum">
						<span class="sp_ipt_number" cartid="220950">
							<span class="minus">-</span><input type="text" onpropertychange="_upt_quantity_post(this)" onkeyup="_upt_quantity_post(this)" value="1"><span class="add">+</span>
						</span>
					</td>
					<td><span class="td-totle-price">￥<span class="sp_price">356.0</span></span></td>
				</tr>
			</tbody>
		</table>
		<ul class="cart-payment">
			<li class="float-L">已选产品<b class="sp_ltems">0</b>件</li>
			<li class="float-R">
				合计(不含运费)：<span class="cart-totle">￥<b id="lab_proallcoin">0.00</b></span>
				<button class="btn btn-yellow" id="checkout" onclick="_toPayMent()">结 算</button>
			</li>
		</ul>
	</div>
</div>

<div id="footer"></div>

<script>
$(function(){
if($(".sp_ipt_number").length>0){
$("#cart_totle").click(function(){
var tschk=$(this).is(":checked")?true:false;
$(".tab_mycart .input_check").prop("checked",tschk);
setTimeout(function(){_sumCoinUpt();_uptCartIsCheckedAll();},200);
});
$(".input_check").click(function(){
setTimeout(function(){_sumCoinUpt()},200);
});
$(".sp_ipt_number .minus").click(function(){
var id=$(this).parent().attr('cartid');
var ipt=$(this).parent().find('input');
var val=ipt.val();
var price=$(this).parent().parent().parent().find('.sp_price');
val=Number(val)-1;
if(val>0){
ipt.val(val>0?val:1);
_sumCoinUpt();
price.html(parseFloat(val*parseFloat($(this).parent().parent().parent().find('.unitprice').val())).toFixed(2));
var cartparams={"quantity":val};
/*_DoAjaxAsyncTrue("PUT",cartparams,'/webapi/v1/user/cart/'+id,function(){
_uptCartInfo();//更新购物车信息
});*/
}
});
$(".sp_ipt_number .add").click(function(){
var id=$(this).parent().attr('cartid');
var ipt=$(this).parent().find('input');
var val=Number(ipt.val())+1;
ipt.val(val);
_sumCoinUpt();
var price=$(this).parent().parent().parent().find('.sp_price');
price.html(parseFloat(val*parseFloat($(this).parent().parent().parent().find('.unitprice').val())).toFixed(2));
var cartparams={"quantity":val};
/*_DoAjaxAsyncTrue("PUT",cartparams,'/webapi/v1/user/cart/'+id,function(){
_uptCartInfo();//更新购物车信息
});*/
});
$(".tab_mycart .a_del").click(function(){
var thisobj=$(this);
var id=thisobj.attr('cartid');
/*_DoAjaxAsyncTrue("DELETE",{},'/webapi/v1/user/cart/'+id,function(){
_uptCartInfo();//更新购物车信息
bide._warn('删除成功!');
setTimeout(function(){layer.closeAll();},1500);
thisobj.parent().parent().remove();
_sumCoinUpt();
});*/
});
//_sumCoinUpt();
}
$("#upload").change(function() {_uploadFie('upload')});
})
//更新总价
function _sumCoinUpt(){
var itemLen=$(".tab_mycart tbody tr .input_check:checked").length;
$(".sp_ltems").html(itemLen);
var sumcoin=0;
$.each($(".tab_mycart tbody tr").has(":checked").find(".sp_ipt_number input"), function(idx, item) {
var rowprice=parseFloat($(item).parent().parent().parent().find('.unitprice').val()).toFixed(2);
sumcoin+=Number($(item).val())*rowprice;
});
$("#lab_proallcoin").html(sumcoin.toFixed(2));
}
//更新产品数量
function _upt_quantity_post(obj){
var ipt=$(obj);
var val=Number(ipt.val());
if(val>0){
var id=$(obj).parent().attr('cartId');
var price=$(obj).parent().parent().parent().find('.sp_price');
price.html(parseFloat(val*parseFloat($(obj).parent().parent().parent().find('.unitprice').val())).toFixed(2));
var cartparams={"quantity":val};
/*_DoAjaxAsyncTrue("PUT",cartparams,'/webapi/v1/user/cart/'+id);*/
_uptCartInfo();//更新购物车信息
_sumCoinUpt();
}else{
ipt.val(1);
}
}
//添加收藏
/*function _addFavorint(proid){
if(!isempty(proid)){
_DoAjaxAsyncTrue("POST",{"proid":proid},"/webapi/v1/mem/favorites",function(){
bide._warn('添加成功');
});
}
}*/
//修改购物车选择状态
function _uptCartIsChecked(obj){
var id=$(obj).attr("cartId");
var status=$(obj).is(":checked");
/*if(!isempty(id)){
_DoAjaxAsyncTrue("PUT",{"id":id,"status":status},"/webapi/v1/uptCartChecked");
}*/
}
//全选修改选中状态
function _uptCartIsCheckedAll(obj){
var cartids=[];
$.each($(".tab_mycart tbody .input_check"),function(idx,item) {
var cartid = $(this).attr("cartid");
if (!isempty(cartid)) {
cartids.push(cartid);
}
});
/*console.log(cartids);
if(cartids.length>0){
_DoAjaxAsyncTrue("PUT",{"ids":cartids,"status":$("#cart_totle").is(":checked")},"/webapi/v1/uptCartCheckedAll");
}*/
}
//跳转到支付页面
function _toPayMent(){
/*if($(".tab_mycart tbody tr:not(.tr_nodata)").has(":checked").length>0){
_aClickOpenWindow("/pay/payment.html","_self");//打开窗口
}*/
}

</script>
</body>
</html>